<%- include ('../partials/head')%>
  <title>Focal Glow | <%=productFound.name%></title>            
  <link rel="stylesheet" href="/css/style-product-detail.css" />
  </head>

  <body>
    <!--HEADER-->
    <%- include ('../partials/header')%>

    <div class="product-name">
      <h2><%=productFound.name%></h2>
      <a href="#" onclick="history.go(-1)"><i id="x" class="fas fa-arrow-circle-left"></i></a>
    </div>

    <main>
      <div class="product-detail">
        <div class="main-img">
          <%images.forEach(image => {%>
            <% if (image.type == 'main') { %>
              <img src="<%=image.name%>" alt="luminaria" />
            <% } %>
          <%})%>
        </div>
        <i class="fas fa-ruler"></i>

        <div class="product-dimensions">
          <%images.forEach(image => {%>
            <% if (image.type == 'dimension') { %>
              <img src="<%=image.name%>" alt="dimensiones luminaria" />
              <% } %>
          <%})%>
        </div>

        <div class="slider-container">
          
            <input type="radio" id="trigger1" name="slider" checked autofocus>
            <label for="trigger1"></label>
            <div class="slide 1">
              <img src ="<%=images[0].name%>">
            </div>
            <input type="radio" id="trigger2" name="slider" checked autofocus>
            <label for="trigger2"></label>
            <div class="slide 2">
              <img src ="<%=images[1].name%>">
            </div> 
            <input type="radio" id="trigger3" name="slider" checked autofocus>
            <label for="trigger3"></label>
            <div class="slide 3">
              <img src ="<%=images[2].name%>">
            </div>   
         
        </div>
      </div>

      <div class="product-info">
        <section class="technical-info">
          <div class = "technical-info-title">
            <h3>Configure su producto</h3>
            <p>Potencia, Temperatura de Color, Óptica & Control</p>
          </div>
          <div class = "options">
            <div class="options-column">
              <% if (features.some(element => element.type == 'power')) { %>
                <select name="power" class="btn">
                  <%features.forEach(feature => {%> 
                    <%if(feature.type != '' && feature.type == 'power'){%>
                      <option value="<%=feature.id%>"><%=feature.name%></option>
                    <%}})%>
                </select>
              <% } %>
              
              <% if (features.some(element => element.type == 'cct')) { %>
              <select name="cct" class="btn">
                <%features.forEach(feature => {%> 
                  <%if(feature.type != '' && feature.type == 'cct'){%>
                <option value="<%=feature.id%>"><%=feature.name%></option>
                  <%}})%>
              </select>
              <% } %>
            </div>

            <div class="options-column">
              <% if (features.some(element => element.type == 'optic')) { %>
                <select name="optic" class="btn">
                  <%features.forEach(feature => {%> 
                    <%if(feature.type != '' && feature.type == 'optic'){%>
                  <option value="<%=feature.id%>"><%=feature.name%></option>
                    <%}})%>
                </select>
              <% } %>
              <% if (features.some(element => element.type == 'dim')) { %>
                <select name="dim" class="btn">               
                  <%features.forEach(feature => {%> 
                    <%if(feature.type != '' && feature.type == 'dim' && feature.name == 'Switch') { %>
                      <option value="<%=feature.id%>">&#xf011; <%=feature.name%></option>
                    <%}else if(feature.type != '' && feature.type == 'dim' && feature.name == 'Bluetooth') { %>
                      <option value="<%=feature.id%>">&#xf293; <%=feature.name%></option>
                  <%}})%>
                </select>
              <% } %>
            </div>
          </div>
       
        
          <article class="technical-data">
            <h3>Características</h3>
            <ul>
              <li>Material:
              <%features.forEach(feature => {%>
                <% if (feature.type == 'material') { %>
                  <%=feature.name%>
                <% } %>
                <%})%>
              </li>
              <li>Fuente:
                <%features.forEach(feature => {%>
                  <% if (feature.type == 'source') { %>
                    <%=feature.name%>
                  <% } %>
                  <%})%>
                </li>
            </ul>
            <p><strong>Descripción:</strong> <br>
              <%=productFound.description%></p>
          </article>
        </section>

        <section class="price">
          <h3 class="price-title">$ 
            <% const toThousand = (n) =>
                n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') %>
             <%= toThousand(productFound.price)%></h3>
          <div class="qtyadd">
            <input type="number" placeholder="1" min="0" />
            <button class="add">AÑADIR</button>
          </div>
        </section>

        <div class="product-dimensions-info">
          <img src="<%=productFound.image_dimension%>" alt="dimensiones luminaria" />
          <span>Dimensiones</span>
        </div>

        <section class="documents">
          <a href="<%=productFound.data_sheet%>" target="_blank"><span><i class="far fa-file-pdf"></i> Hoja Técnica</span></a>
          <a href="<%=productFound.install_sheet%>"target="_blank"><span><i class="far fa-file-pdf"></i> Manual de Instalación</span></a>
        </section>
      </div>
    </main>

    <section class="similar-products-container">
      <article class="similar-products">
        <h3>Productos Similares</h3>
        <div class="slider-container">
          <% similarProductsFiltered.forEach((product, index) => { %>
            <input type="radio" id="trigger<%=index +3%>" name="slider2" checked autofocus >
            <label for="trigger<%=index + 3%>"></label>
            <div class="slide2 <%=index + 3%>">
              <a href="/product/detail/<%=product.id%>"><img src ="<%=product.images[0].name%>"></a>
            </div>  
          <%}) %>
        </div>
      </article>
    </section>

    

    <!--FOOTER-->
    <%- include('../partials/footer') %>
  </body>
</html>
